<!DOCTYPE html>
<html>
<head>
    <title>{{ title }}</title>
<style>
    body {
        margin: 0;
        padding: 20px;
        background: #000;
    }
    
    h1 {
        color: #fff;
        text-align: center;
        font-family: Arial, sans-serif;
        display: inline-block;
        width: 100%;
    }
    
    .auto-refresh-indicator {
        position: fixed;
        top: 20px;
        right: 20px;
        background: #28a745;
        color: white;
        padding: 10px 20px;
        border-radius: 25px;
        font-family: Arial, sans-serif;
        font-size: 14px;
        display: flex;
        align-items: center;
        gap: 10px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        z-index: 1000;
    }
    
    .refresh-icon {
        width: 20px;
        height: 20px;
        border: 3px solid white;
        border-top-color: transparent;
        border-radius: 50%;
        animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    
    .countdown {
        font-weight: bold;
    }
    
    .image-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 15px;
        max-width: 100vw;
        margin-top: 20px;
    }
    
    .image-grid img {
        width: 100%;
        height: 350px;
        object-fit: cover;
        border-radius: 8px;
        transition: transform 0.3s ease;
    }
    
    .image-grid img:hover {
        transform: scale(1.05);
    }
</style>

</head>
<body>
    <div class="auto-refresh-indicator">
        <div class="refresh-icon"></div>
        <span>Auto-refresh in <span class="countdown">30</span>s</span>
    </div>
    
    <h1>{{ title }}</h1>
    <div class="image-grid">
        {% for image in images[:28] %}
        <img src="{{ url_for('static', filename=folder + '/' + image) }}" 
             alt="Face {{ loop.index }}">
        {% endfor %}
    </div>
    
    <script>
        let countdown = 30;
        const countdownElement = document.querySelector('.countdown');
        
        // Update countdown every second
        const countdownInterval = setInterval(function() {
            countdown--;
            countdownElement.textContent = countdown;
            
            if (countdown <= 0) {
                clearInterval(countdownInterval);
            }
        }, 1000);
        
        // Auto-refresh page every 30 seconds
        setTimeout(function(){
            location.reload();
        }, 30000);
        
        // Optional: Add cache-busting to images to force reload
        document.addEventListener('DOMContentLoaded', function() {
            const images = document.querySelectorAll('.image-grid img');
            images.forEach(img => {
                img.src = img.src + '?t=' + new Date().getTime();
            });
        });
    </script>
</body>
</html>
